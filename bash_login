#!/usr/bin/bash

PS1='\u@\h:\W$(__git_ps1 " (%s)")$ '
export EDITOR=vim

# Environment #############################
export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home
export GOBIN="~/Projects/golang/bin"
export PATH="~/bin:$PATH:$GOBIN"
export CLICOLOR=true
export LSCOLORS="exfxcxdxbxegedabagacad"
export PGDATA="/usr/local/pgsql/data"

# Git Settings #############################
export GITHUB="git@github.com"

# Command Aliases ##########################
alias firefox=/Applications/Firefox.app/Contents/MacOS/firefox-bin
alias preview="open -a preview"
alias dotfiles="cd ~/.dotfiles"
alias gr=gitroot
alias r=rails
alias tmr="tmux attach-session"

function gitroot {
  if [ "$(pwd)" != "$(git rev-parse --show-toplevel)" ]; then
    go-to-git-root
  elif [ $(cd .. && git rev-parse --is-inside-work-tree &> /dev/null; echo $?) -eq 0 ]; then
    cd .. && go-to-git-root
  fi
}

function go-to-git-root {
  cd $(git rev-parse --show-toplevel)
}

# Include secured settings file
source ~/.dotfiles/secure/env.sh
source ~/.dotfiles/git/git-completion.bash

# RVM - Ruby Version Manager
[[ -s $HOME/.rvm/scripts/rvm ]] && source $HOME/.rvm/scripts/rvm

# End of file stuff that's always here
test -r /sw/bin/init.sh && . /sw/bin/init.sh
